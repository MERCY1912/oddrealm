# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –±–æ—Ç–æ–≤

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –±–æ—Ç–æ–≤ —Å–æ–∑–¥–∞–µ—Ç –∏–º–∏—Ç–∞—Ü–∏—é –∂–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ:
- –û–±—â–∞—é—Ç—Å—è –≤ —á–∞—Ç–µ –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç Mistral AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å –∏ –ª–æ–∫–∞—Ü–∏—é
- –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –æ–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ì–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```sql
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
scripts/apply-bot-system-migration.sql
-- –ò –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase Dashboard -> SQL Editor
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ –ø–∞–ø–∫–∏**
```sql
-- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏:
supabase/migrations/20250121000001_create_bot_system.sql
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Mistral AI API

1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á: https://console.mistral.ai/
2. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `env.local`:
```env
VITE_MISTRAL_API_KEY="your_api_key_here"
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
node scripts/test-bot-system.cjs
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
npm run dev
```

## üé≠ –ë–æ—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –ì–∞—Ä–æld (–í–æ–∏–Ω)
- **–£—Ä–æ–≤–µ–Ω—å**: 15
- **–õ–∏—á–Ω–æ—Å—Ç—å**: –û–ø—ã—Ç–Ω—ã–π –≤–æ–∏–Ω, –ø–æ–º–æ–≥–∞–µ—Ç –Ω–æ–≤–∏—á–∫–∞–º
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: 70% —à–∞–Ω—Å –æ—Ç–≤–µ—Ç–∞
- **–°—Ç–∏–ª—å**: –ö—Ä–∞—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã, —É–ø–æ–º–∏–Ω–∞–µ—Ç –±–æ–∏ –∏ –∞—Ä–µ–Ω—É

### –ú–µ—Ä–ª–∏–Ω (–ú–∞–≥)
- **–£—Ä–æ–≤–µ–Ω—å**: 22
- **–õ–∏—á–Ω–æ—Å—Ç—å**: –ú—É–¥—Ä—ã–π –º–∞–≥, –∑–Ω–∞–µ—Ç –º–Ω–æ–≥–æ –æ –º–∞–≥–∏–∏
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: 60% —à–∞–Ω—Å –æ—Ç–≤–µ—Ç–∞
- **–°—Ç–∏–ª—å**: –î–∞–µ—Ç —Å–æ–≤–µ—Ç—ã, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏

### –õ—É–Ω–∞ (–õ—É—á–Ω–∏–∫)
- **–£—Ä–æ–≤–µ–Ω—å**: 18
- **–õ–∏—á–Ω–æ—Å—Ç—å**: –î—Ä—É–∂–µ–ª—é–±–Ω–∞—è –∏ –æ–±—â–∏—Ç–µ–ª—å–Ω–∞—è
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: 80% —à–∞–Ω—Å –æ—Ç–≤–µ—Ç–∞
- **–°—Ç–∏–ª—å**: –û–±—Å—É–∂–¥–∞–µ—Ç –∫–≤–µ—Å—Ç—ã –∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
BotService
‚îú‚îÄ‚îÄ MistralService (AI –æ—Ç–≤–µ—Ç—ã)
‚îú‚îÄ‚îÄ Database (–±–æ—Ç—ã, —Å–æ–æ–±—â–µ–Ω–∏—è, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
‚îú‚îÄ‚îÄ Chat Integration (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã)
‚îî‚îÄ‚îÄ Presence System (—Å—Ç–∞—Ç—É—Å –∏ –ª–æ–∫–∞—Ü–∏—è)

Components
‚îú‚îÄ‚îÄ BotManagement (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏)
‚îú‚îÄ‚îÄ OnlinePlayersListWithBots (—Å–ø–∏—Å–æ–∫ —Å –±–æ—Ç–∞–º–∏)
‚îî‚îÄ‚îÄ Chat (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–∞–º–∏)
```

## üìä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Ç–∞**: –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**: –ö–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã
- **–û—Ç–≤–µ—Ç—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**: 50-80% —à–∞–Ω—Å

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–π
- –ë–æ—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –æ–Ω–ª–∞–π–Ω
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—é—Ç –ª–æ–∫–∞—Ü–∏—é
- –†–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –∏–≥—Ä–æ–≤—É—é —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—é

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏

### –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```tsx
import BotManagement from '@/components/BotManagement';

// –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
<BotManagement />
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
```typescript
import BotService from '@/services/botService';

const botService = BotService.getInstance();

// –ó–∞–ø—É—Å–∫ –±–æ—Ç–æ–≤
await botService.initializeBots();

// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–æ–≤
botService.stopBotActivity();

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –±–æ—Ç–æ–≤
const bots = botService.getActiveBots();
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
```
BotService: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–æ—Ç–æ–≤...
BotService: –°–æ–∑–¥–∞–Ω –±–æ—Ç: –ì–∞—Ä–æld
–ë–æ—Ç –ì–∞—Ä–æld –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!"
–ë–æ—Ç –ì–∞—Ä–æld –æ—Ç–ø—Ä–∞–≤–∏–ª –æ—Ç–≤–µ—Ç: "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞ –≤ –∏–≥—Ä–µ?"
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `bot_characters` - –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –±–æ—Ç–æ–≤
- `bot_messages` - —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–æ–≤
- `bot_activity` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–æ—Ç–æ–≤
- `user_activity` - –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –±–æ—Ç–æ–≤

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞
```sql
INSERT INTO public.bot_characters (
    name, username, character_class, level, personality, 
    is_active, response_chance, status, location
) VALUES (
    '–ù–æ–≤—ã–π–ë–æ—Ç',
    'new_bot',
    'warrior',
    10,
    '–û–ø–∏—Å–∞–Ω–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞...',
    true,
    60,
    'online',
    '–¢–∞–≤—Ä–æ—Å'
);
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è
```typescript
// –í BotService.ts
private async checkForNewMessages(): Promise<void> {
  // –ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∏
  // –¢–µ–∫—É—â–∞—è: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
}
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç—ã –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á Mistral
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã –≤ –ë–î
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –ë–æ—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –æ–Ω–ª–∞–π–Ω
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `is_active = true`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å `user_activity`

### –û—à–∏–±–∫–∏ API
```typescript
// MistralService –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ fallback –æ—Ç–≤–µ—Ç—ã
if (!this.apiKey) {
  return this.getFallbackResponse(botPersonality);
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ Mistral
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- Fallback –æ—Ç–≤–µ—Ç—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ AI
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤
- –ß–∞—Å—Ç–æ—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API –∫–ª—é—á–∏
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫–ª—é—á–∏ –≤ Git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–ª—é—á–∞–º

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–æ—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ –ë–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—â–∞—é—Ç—Å—è –≤ —á–∞—Ç–µ
- ‚úÖ –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ Mistral AI
- ‚úÖ –ñ–∏–≤–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –¥–∞–∂–µ –ø—Ä–∏ –º–∞–ª–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ
